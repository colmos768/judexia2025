{% extends 'base.html' %}
{% block content %}
<div class="p-6">
    <h2 class="text-2xl font-bold mb-4">Gesti√≥n de Causas</h2>

    <form action="{{ url_for('registrar_causa') }}" method="POST" class="grid grid-cols-2 gap-4 mb-6 bg-white p-4 rounded-xl shadow">
        <input name="tipo" placeholder="Tipo de causa" required class="input input-bordered" />
        <input name="rol" placeholder="Rol (ej: C-1234-2024)" required class="input input-bordered" />
        <input name="tribunal" placeholder="Tribunal" required class="input input-bordered" />
        <select name="cliente_id" class="input input-bordered" required>
            <option value="">Asignar cliente</option>
            {% for cli in clientes %}
            <option value="{{ cli.id }}">{{ cli.nombre }} ({{ cli.rut }})</option>
            {% endfor %}
        </select>
        <button type="submit" class="btn btn-primary col-span-2">Registrar causa</button>
    </form>

    <h3 class="text-xl font-semibold mb-2">Listado de causas</h3>
    <div class="overflow-x-auto">
        <table class="table-auto w-full text-sm bg-white rounded-xl shadow">
            <thead>
                <tr class="bg-gray-100 text-left">
                    <th class="px-4 py-2">Tipo</th>
                    <th class="px-4 py-2">Rol</th>
                    <th class="px-4 py-2">Tribunal</th>
                    <th class="px-4 py-2">Cliente</th>
                </tr>
            </thead>
            <tbody>
                {% for causa in causas %}
                <tr class="hover:bg-gray-50">
                    <td class="px-4 py-2">{{ causa.tipo }}</td>
                    <td class="px-4 py-2">{{ causa.rol }}</td>
                    <td class="px-4 py-2">{{ causa.tribunal }}</td>
                    <td class="px-4 py-2">{{ causa.cliente.nombre }}</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}




